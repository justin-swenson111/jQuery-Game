<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suffering</title>
    <link rel="stylesheet" href="styles/css/styles.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <link rel="shortcut icon" href="media/favicon-16x16.png" type="image/x-icon">
</head>
<body>
    <section>
        <h1>Score: 0</h1>
        <h2>High Score: 0</h2>
        <section class="grid">
            <div class="row">
                <button class="" id="1"><img src="" alt=""></button>
                <button class="" id="2"><img src="" alt=""></button>
                <button class="" id="3"><img src="" alt=""></button>
                <button class="" id="4"><img src="" alt=""></button>
                <button class="" id="5"><img src="" alt=""></button>
                <button class="" id="6"><img src="" alt=""></button>
            </div>
            <div class="row">
                <button class="" id="7"><img src="" alt=""></button>
                <button class="" id="8"><img src="" alt=""></button>
                <button class="" id="9"><img src="" alt=""></button>
                <button class="" id="10"><img src="" alt=""></button>
                <button class="" id="11"><img src="" alt=""></button>
                <button class="" id="12"><img src="" alt=""></button>
            </div>
            <div class="row">
                <button class="" id="13"><img src="" alt=""></button>
                <button class="" id="14"><img src="" alt=""></button>
                <button class="" id="15"><img src="" alt=""></button>
                <button class="" id="16"><img src="" alt=""></button>
                <button class="" id="17"><img src="" alt=""></button>
                <button class="" id="18"><img src="" alt=""></button>
            </div>
            <div class="row">
                <button class="" id="19"><img src="" alt=""></button>
                <button class="" id="20"><img src="" alt=""></button>
                <button class="" id="21"><img src="" alt=""></button>
                <button class="" id="22"><img src="" alt=""></button>
                <button class="" id="23"><img src="" alt=""></button>
                <button class="" id="24"><img src="" alt=""></button>
            </div>
            <div class="row">
                <button class="" id="25"><img src="" alt=""></button>
                <button class="" id="26"><img src="" alt=""></button>
                <button class="" id="27"><img src="" alt=""></button>
                <button class="" id="28"><img src="" alt=""></button>
                <button class="" id="29"><img src="" alt=""></button>
                <button class="" id="30"><img src="" alt=""></button>
            </div>
            <div class="row">
                <button class="" id="31"><img src="" alt=""></button>
                <button class="" id="32"><img src="" alt=""></button>
                <button class="" id="33"><img src="" alt=""></button>
                <button class="" id="34"><img src="" alt=""></button>
                <button class="" id="35"><img src="" alt=""></button>
                <button class="" id="36"><img src="" alt=""></button>
            </div>
            <button id="shuffle">shuffle</button>
            <button id="start">restart</button>
        </section>
        <section id="group">

        </section>
    </section>
    <script>
        $(document).ready(function(){
    const types = {
        "lebron":{
            "name":"Lebron James",
            "class":'lebron',
            "frequency":0,
            "image":"https://i.etsystatic.com/51516337/r/il/20e70c/6287083849/il_fullxfull.6287083849_1fov.jpg",
            "won":false,
        },
        "lyndon":{
            "name":"Lyndon B. Johnson",
            "class":"lyndon",
            "frequency":0,
            "image":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/37_Lyndon_Johnson_3x4.jpg/800px-37_Lyndon_Johnson_3x4.jpg",
            "won":false,

        },
        "pikachu":{
            "name":"Pikachu",
            "class":"pikachu",
            "frequency":0,
            "image":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhUI3o0VQxnb0mx2apfVxPL4_3kujpXRThdA&s",
            "won":false,


        },
        "cartmen":{
            "name":"Eric Cartmen",
            "class":"cartmen",
            "frequency":0,
            "image":"https://i.scdn.co/image/ab67616d0000b2733be777fd4bb1f5825d161920",
            "won":false,


        },
        "square":{
            "name":"Square",
            "class":"square",
            "frequency":0,
            "image":"https://m.media-amazon.com/images/I/71Q4Whw5ScL._AC_UF894,1000_QL80_.jpg",
            "won":false,


        },
        "triangle":{
            "name":"Triangle",
            "class":"triangle",
            "frequency":0,
            "image":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLX58_Xv8y2HLnmTFvXymOCqOb3SPLJY4iwg&s",
            "won":false,


        },
        "rhombus":{
            "name":"Rhombus",
            "class":"rhombus",
            "frequency":0,
            "image":"https://i.ytimg.com/vi/0PulPAsd4-g/maxresdefault.jpg",
            "won":false,


        },
        "poweranger":{
            "name":"Poweranger",
            "class":"poweranger",
            "frequency":0,
            "image":"https://cdnb.artstation.com/p/assets/images/images/057/743/851/large/iconic-design-studio-luca-nemolato-redranger-v2-34-stage1.jpg?1672536401",
            "won":false,


        },
        "windmill":{
            "name":"Windmill",
            "class":"windmill",
            "frequency":0,
            "image":"https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/GGParkNorthWindmill2.jpg/1200px-GGParkNorthWindmill2.jpg",
            "won":false,


        },
        "battery":{
            "name":"Battery",
            "class":"battery",
            "frequency":0,
            "image":"https://webobjects2.cdw.com/is/image/CDW/5499085?$product-main$",
            "won":false,

        },
        "spider":{
            "name":"Spider",
            "class":"spider",
            "frequency":0,
            "image":"https://preview.redd.it/ultimate-spider-man-fanart-v0-i2ilmk0dvaid1.jpeg?width=640&crop=smart&auto=webp&s=bf698915e91246555991268d1522286ba337c772",
            "won":false,

        },
        "cowboy":{
            "name":"Cowboy Hat",
            "class":"cowboy",
            "frequency":0,
            "image":"https://shop.opry.com/cdn/shop/files/2794bl_1080x_4a4ac796-feec-445c-87e4-97499a38a465.jpg?v=1695822324",
            "won":false,

        },
        "batman":{
            "name":"Batman",
            "class":"batman",
            "frequency":0,
            "image":"https://mediaproxy.tvtropes.org/width/1200/https://static.tvtropes.org/pmwiki/pub/images/batman_91.png",
            "won":false,

        },
        "apple":{
            "name":"Apple",
            "class":"apple",
            "frequency":0,
            "image":"https://i.pinimg.com/564x/b1/f1/70/b1f170bfba5817dd84429e5b5ebbcc85.jpg",
            "won":false,

        },
        "basketball":{
            "name":"Basketball",
            "class":"basketball",
            "frequency":0,
            "image":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRuu6ehEG7zcMmQhCYkrqBPNqxnGwYxJne3DA&s",
            "won":false,

        },
        "galvanized":{
            "name":"Galvanized Square Steel",
            "class":"galvanized",
            "frequency":0,
            "image":"https://preview.redd.it/i-love-the-new-galvanized-mod-v0-k06r00pstr1d1.png?auto=webp&s=1c56d5cf9c4471f68a724b366aa59149f79da9d7",
            "won":false,

        },
        "dollar":{
            "name":"Dollar Bill",
            "class":"dollar",
            "frequency":0,
            "image":"https://images.squarespace-cdn.com/content/v1/51dc0f2ae4b08fbe8d2c8523/1373652422804-0HUPD1WWEUBN2AZFP9SU/MW_CP_LINCOLNA.jpg?format=2500w",
            "won":false,

        },
        "boom":{
            "name":"Boom Box",
            "class":"boom",
            "frequency":0,
            "image":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSraSnFEN8iOwUeqie8lCntPwtWnWcMTkwk6g&s",
            "won":false,

        },
    }
    // console.table(types)
    let count = 36;
    let selected =[]
    let current = ""
    let group = []
    let num = 0;
    let attempts =0
    let score = 0;
    let highscore = 0;
    if (localStorage.getItem("highscore") == null){
        localStorage.setItem("highscore",0)
    }
    highscore = localStorage.getItem("highscore")
    changeScore();
    

    function changeScore(){
        $("h1").text(`Score: ${score}`)
        if (score > highscore){
            highscore = score;
            localStorage.setItem("highscore",highscore)
        }
        $("h2").text(`High Score: ${highscore}`)
    }
    function start(){
        const keys = Object.keys(types);
        keys.forEach(key => types[key].frequency = 0);
        num = Math.floor(Math.random() * 18)+1;
        while (selected.length < num) {
            const randomKey = keys[Math.floor(Math.random() * keys.length)];
            if (!selected.some(item => item.name === types[randomKey].name)) {
                selected.push(types[randomKey]);
            }
        }
        for (let i = 1; i <=36; i++) {
            let ran = Math.floor(Math.random() * selected.length);
            $(`#${i}`).children("img").attr("src",selected[ran].image);
            $(`#${i}`).toggleClass(selected[ran].class);
            $(`#${i}`).children("img").animate({"opacity":"0"},1000)
            selected[ran].frequency++;
        }
        for (let i = 0; i < selected.length; i++) {
            if (selected[i].frequency ==0){
                selected.splice(i, 1);
            }
        }

    }
    start();
    function shuffle(){
        let temp =[]
        for (let i = 0; i < selected.length; i++) {
            temp.push(selected[i].frequency)
        }
        for (let i = 1; i <=36; i++) {
            while (true){
                let ran = Math.floor(Math.random() * selected.length);
                if (temp[ran] > 0){
                    for(let j = 0; j < selected.length; j++){
                        $(`#${i}`).removeClass(selected[j].class);
                    }
                    $(`#${i}`).children("img").attr("src",selected[ran].image);
                    $(`#${i}`).toggleClass(selected[ran].class);
                    temp[ran]--;
                    break;
                }
            }
            found(i)

        }
        $("#group").empty()
        for (let i =0; i<selected.length;i++){
            $("#group").append(`<p>card type frequency: ${selected[i].frequency}</p>`)
        }
    }
    function found(i){
        for (let j = 0; j < selected.length; j++) {
                if (selected[j].class ==$(`#${i}`).attr("class")){
                    if (selected[j].won==true){
                        $(`#${i}`).children("img").animate({"opacity":"1"},1000)
                }
                else{
                    $(`#${i}`).children("img").animate({"opacity":"0"},1000)
                }
            }
        }
    }
    function gitgud(){
        attempts = 0;
        let rand = Math.floor(Math.random() * 5)+1;
        let inp;
        do {
            inp = prompt("guess a number one through five");
        } while (isNaN(inp));
        if (inp != rand){
            alert("WRONG!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
            shuffle();
        }
    }
    $("button").on("click", function(){
        $(this).children("img").addClass("flip")
        $(this).children("img").animate({"opacity":"1"},1000)

        if(group.length == 0){
            num=0;
        }
        group.push($(this).attr("id"))
        if ($(this).attr("class") == $(`#${group[0]}`).attr("class")){
            console.log("match")
            num++;
            for (let i = 0; i < selected.length; i++) {
                if (selected[i].class == $(this).attr("class")){
                    if (num==selected[i].frequency){
                        console.log("win")
                        for (let j = 0; j < group.length; j++) {
                            if (!selected[i].won){
                                selected[i].won = true;
                                score++;
                                changeScore();
                                group=[]
                            }

                        }
                    }
                }
            }
            console.log(num)
        }
        else{
            for (let i = 0; i < group.length; i++) {
                $(`#${group[i]}`).children("img").removeClass("flip")
            }
            group=[]
            console.log("no match")
            num=0;
            attempts++;
            if (attempts == 5){
                gitgud()
            }
            for (let i = 1; i <=36; i++) {
                found(i)
            }

        }
        //console.log(group)
    
    })
    shuffle();
    console.log(selected);
    $("#shuffle").on("click",function(){
        shuffle()
        
    })
    $("#start").on("click",function(){
        score = 0;
        changeScore();
        start();
        shuffle();
    })



    
    
});
    </script>
</body>
</html>